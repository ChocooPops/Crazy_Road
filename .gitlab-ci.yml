
# Build JAVA applications using Apache Maven (http://maven.apache.org)
# For docker image tags see https://hub.docker.com/_/maven/
#
# For general lifecycle information see https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html

# This template will build and test your projects
# * Caches downloaded dependencies and plugins between invocation.
# * Verify but don't deploy merge requests.
# * Deploy built artifacts from master branch only.

variables:
  # `showDateTime` will show the passed time in milliseconds. You need to specify `--batch-mode` to make this work.
  MAVEN_OPTS: >-
    -Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository
    -Dorg.slf4j.simpleLogger.showDateTime=true

default:
  image: maven:3.6.1-jdk-11
  cache:
    key: $CI_COMMIT_REF_SLUG
    paths:
      - .m2/

java:
  stage: test
  script:
    - mvn test
  artifacts:
    when: always
    reports:
      junit:
        - surefire-reports/TEST-*.xml
        - failsafe-reports/TEST-*.xml

